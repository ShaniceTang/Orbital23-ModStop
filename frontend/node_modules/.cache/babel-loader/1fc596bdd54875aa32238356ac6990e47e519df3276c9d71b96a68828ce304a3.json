{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/tangs/Orbital23-ModStop1/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/tangs/Orbital23-ModStop1/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/tangs/Orbital23-ModStop1/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{useAuthContext}from'./useAuthContext';export var useSignup=function useSignup(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useAuthContext=useAuthContext(),dispatch=_useAuthContext.dispatch;var signup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password,username,course,track){var response,json,response1;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.next=4;return fetch('/api/user/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password,username:username,course:course,track:track})});case 4:response=_context.sent;_context.next=7;return response.json();case 7:json=_context.sent;_context.next=10;return fetch('/api/user/signupsched',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,course:course,track:track})});case 10:response1=_context.sent;//const json1 = await response1.json()\nif(!response.ok||!response1.ok){setIsLoading(false);setError(json.error);}if(response.ok&&response1.ok){// save the user to local storage\nlocalStorage.setItem('user',JSON.stringify(json));// update the auth context\ndispatch({type:'LOGIN',payload:json});// update loading state\nsetIsLoading(false);}case 13:case\"end\":return _context.stop();}},_callee);}));return function signup(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments);};}();return{signup:signup,isLoading:isLoading,error:error};};","map":{"version":3,"names":["useState","useAuthContext","useSignup","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","isLoading","setIsLoading","_useAuthContext","dispatch","signup","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","email","password","username","course","track","response","json","response1","wrap","_callee$","_context","prev","next","fetch","method","headers","body","JSON","stringify","sent","ok","localStorage","setItem","type","payload","stop","_x","_x2","_x3","_x4","_x5","apply","arguments"],"sources":["C:/Users/tangs/Orbital23-ModStop1/frontend/src/hooks/useSignup.js"],"sourcesContent":["import { useState } from 'react'\nimport { useAuthContext } from './useAuthContext'\n\nexport const useSignup = () => {\n  const [error, setError] = useState(null)\n  const [isLoading, setIsLoading] = useState(null)\n  const { dispatch } = useAuthContext()\n\n  const signup = async (email, password, username, course, track) => {\n    setIsLoading(true)\n    setError(null)\n\n    const response = await fetch('/api/user/signup', {\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify({ email, password, username, course, track })\n    })\n    const json = await response.json()\n\n    const response1 = await fetch('/api/user/signupsched', {\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify({ email, course, track })\n    })\n    //const json1 = await response1.json()\n\n    if (!response.ok || !response1.ok) {\n      setIsLoading(false)\n      setError(json.error)\n    }\n\n    if (response.ok && response1.ok) {\n      // save the user to local storage\n      localStorage.setItem('user', JSON.stringify(json))\n\n      // update the auth context\n      dispatch({type: 'LOGIN', payload: json})\n\n      // update loading state\n      setIsLoading(false)\n    }\n  }\n\n\n  return { signup, isLoading, error }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}